<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>Our Winter</title>

<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
    background: #f4f4f6;
    color: #333;
  }

  .hidden { display: none; }

  /* ===== ì¸íŠ¸ë¡œ ===== */
  .center {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    
    background: #f4f4f6;
    z-index: 10;
  }

  .button-row {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 16px;
    flex-wrap: nowrap;
  }

  button {
    padding: 8px 22px;
    border-radius: 20px;
    border: none;
    background: #ddd;
    cursor: pointer;
    font-size: 14px;
  }

  button:hover { background: #bbb; }

  /* ===== í™ˆ ===== */
  #home {
    padding: 20px;
    max-width: 360px;
    margin: 0 auto;
  }

  .dday {
    background: #fff;
    border-radius: 14px;
    padding: 14px;
    margin: 12px 0 18px;
    text-align: center;
  }

  /* ===== ìº˜ë¦°ë” ===== */
  .calendar {
    background: #fff;
    border-radius: 18px;
    padding: 14px;
  }

  .calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .days {
    margin-top: 10px;
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 6px;
    font-size: 12px;
    text-align: center;
  }

  .day {
    padding: 6px 0;
    border-radius: 6px;
    position: relative;
    cursor: default;
  }

  .mark {
    background: #e1ebff;
    font-weight: 600;
  }

  .day span {
    font-size: 10px;
    display: block;
  }

  .day:hover::after {
    content: attr(data-text);
    position: absolute;
    left: 50%;
    bottom: -28px;
    transform: translateX(-50%);
    background: #333;
    color: #fff;
    padding: 3px 6px;
    border-radius: 6px;
    font-size: 10px;
    white-space: nowrap;
  }

  /* ===== Anniversary ===== */
  h3 {
    margin-top: 22px;
  }

  #annivList {
    list-style: none;
    padding: 0;
    margin: 8px 0;
  }

  #annivList li {
    margin-bottom: 6px;
    cursor: pointer;
  }

  #detail {
    margin-top: 14px;
    background: #fff;
    border-radius: 14px;
    padding: 12px;
  }
</style>
</head>

<body>

<!-- ===== ì¸íŠ¸ë¡œ ===== -->
<div id="intro" class="center">
  <h1>ëˆˆì€ ì–¸ì œê¹Œì§€ë‚˜ ë‚´ë¦´ê¹Œ?</h1>
  <div class="button-row">
    <button onclick="enterHome()">Yes</button>
    <button onclick="showNo()">No</button>
  </div>
  <p id="noText" class="hidden">ëˆˆì€ ê²°êµ­ ë…¹ì•„ë²„ë ¤.</p>
</div>

<!-- ===== í™ˆ ===== -->
<div id="home" class="hidden">
  <h2>Our Winter â„ï¸</h2>

  <div class="dday" id="ddayBox"></div>

  <div class="calendar">
    <div class="calendar-header">
      <button onclick="moveMonth(-1)">&lt;</button>
      <strong id="monthTitle"></strong>
      <button onclick="moveMonth(1)">&gt;</button>
    </div>
    <div class="days" id="calendar"></div>
  </div>

  <h3>Anniversary</h3>
  <ul id="annivList"></ul>

  <div id="detail" class="hidden"></div>
</div>

<script>
  /* ===== ê¸°ë³¸ ë‚ ì§œ ===== */
  const startDate = new Date(2023, 1, 17); // 2023-02-17 = 1ì¼
  const birthdays = [
    { m: 10, d: 30, text: "ğŸ‚ í•œì„œì˜¬ ìƒì¼" },
    { m: 6, d: 3, text: "ğŸ‚ í•˜í˜„ìš° ìƒì¼" }
  ];

  let current = new Date();

  /* ===== ì¸íŠ¸ë¡œ ===== */
  function enterHome() {
    document.getElementById("intro").style.display = "none";
    document.getElementById("home").classList.remove("hidden");
    updateDday();
    renderCalendar();
  }

  function showNo() {
    document.getElementById("noText").classList.remove("hidden");
  }

  /* ===== D-Day ===== */
  function updateDday() {
    const today = new Date();
    const days = Math.floor((today - startDate) / 86400000) + 1;
    document.getElementById("ddayBox").innerHTML =
      `<strong>D+${days}</strong><br>ìš°ë¦¬ê°€ ë§Œë‚œ ì§€ ${days}ì¼`;
  }

  /* ===== ìº˜ë¦°ë” ì´ë™ ===== */
  function moveMonth(diff) {
    current.setMonth(current.getMonth() + diff);
    renderCalendar();
  }

  /* ===== ìº˜ë¦°ë” ë Œë” ===== */
  function renderCalendar() {
    const cal = document.getElementById("calendar");
    const list = document.getElementById("annivList");
    const detail = document.getElementById("detail");

    cal.innerHTML = "";
    list.innerHTML = "";
    detail.classList.add("hidden");

    const y = current.getFullYear();
    const m = current.getMonth();

    document.getElementById("monthTitle").innerText = `${y}ë…„ ${m + 1}ì›”`;

    "ì¼ì›”í™”ìˆ˜ëª©ê¸ˆí† ".split("").forEach(d => {
      cal.innerHTML += `<div>${d}</div>`;
    });

    const firstDay = new Date(y, m, 1).getDay();
    const lastDate = new Date(y, m + 1, 0).getDate();

    for (let i = 0; i < firstDay; i++) cal.innerHTML += `<div></div>`;

    for (let d = 1; d <= lastDate; d++) {
      const cellDate = new Date(y, m, d);
      let label = "";
      let icon = "";

      // ì‚¬ê·„ ë‚ 
      if (cellDate.getTime() === startDate.getTime()) {
        label = "â¤ï¸ ì‚¬ê·„ ë‚  (1ì¼)";
        icon = "â¤ï¸";
      }

      // ìƒì¼
      birthdays.forEach(b => {
        if (b.m === m && b.d === d) {
          label = b.text;
          icon = "ğŸ‚";
        }
      });

      // 100ì¼ ë‹¨ìœ„
      const days = Math.floor((cellDate - startDate) / 86400000) + 1;
      if (days > 1 && days % 100 === 0) {
        label = `â„ï¸ ${days}ì¼`;
        icon = "â„ï¸";
        list.innerHTML += `<li onclick="showDetail('${days}ì¼','${cellDate.toLocaleDateString()}')">â„ï¸ ${days}ì¼</li>`;
      }

      // ì£¼ë…„
      if (cellDate.getDate() === startDate.getDate() &&
          cellDate.getMonth() === startDate.getMonth() &&
          cellDate.getFullYear() > startDate.getFullYear()) {
        const yearDiff = cellDate.getFullYear() - startDate.getFullYear();
        label = `ğŸ’ ${yearDiff}ì£¼ë…„`;
        icon = "ğŸ’";
        list.innerHTML += `<li onclick="showDetail('${yearDiff}ì£¼ë…„','${cellDate.toLocaleDateString()}')">ğŸ’ ${yearDiff}ì£¼ë…„</li>`;
      }

      cal.innerHTML += `
        <div class="day ${label ? "mark" : ""}" data-text="${label}">
          ${d}
          <span>${icon}</span>
        </div>
      `;
    }
  }

  /* ===== ìƒì„¸ ===== */
  function showDetail(title, date) {
    const box = document.getElementById("detail");
    box.classList.remove("hidden");
    box.innerHTML = `
      <h4>${title}</h4>
      <p>${date}</p>
      <p>ğŸ“¸ ì—¬ê¸°ì— ì‚¬ì§„ì„ ë„£ì„ ìˆ˜ ìˆì–´ìš”</p>
    `;
  }
</script>

</body>
</html>
