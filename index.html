<!DOCTYPE html>
<html lang="ko">

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Our Winter</title>

<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
    background: #f4f4f6;
    color: #333;
  }

  /* ì¸íŠ¸ë¡œ ë¬¸ì¥ ìƒ‰ ê³ ì • */
  #intro {
    color: #000;   /* ê²€ì •ìƒ‰ */
  }

  /* ===== ì¸íŠ¸ë¡œ ===== */
  .center {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    
    background: #f4f4f6;
    z-index: 10;
  }

  .button-row {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 16px;
    flex-wrap: nowrap;
  }

  button {
  padding: 10px 26px;
  border-radius: 20px;
  border: none;
  background: #e5e5e5;   /* ê¸°ì¡´ #ddd ë³´ë‹¤ ë°ê²Œ */
  cursor: pointer;
  font-size: 15px;
  }

  button:hover { background: #bbb; }

  /* ===== í™ˆ ===== */
  #home {
  padding: 16px;
  max-width: 420px;
  margin: 0 auto;
  }

  .dday {
    background: #fff;
    border-radius: 14px;
    padding: 14px;
    margin: 12px 0 18px;
    text-align: center;
  }

  /* ===== ìº˜ë¦°ë” ===== */
  .calendar {
    background: #fff;
    border-radius: 18px;
    padding: 14px;
  }

  .calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .days {
    margin-top: 10px;
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 6px;
    font-size: 12px;
    text-align: center;
  }

  .day {
  padding: 10px 0;
  border-radius: 6px;
  position: relative;
  cursor: default;
  font-size: 14px;
  }

  .mark {
    background: #e1ebff;
    font-weight: 600;
  }

  .day span {
    font-size: 10px;
    display: block;
  }

  /* ===== Anniversary ===== */
  h3 {
    margin-top: 22px;
  }

  #annivList {
    list-style: none;
    padding: 0;
    margin: 8px 0;
  }

  #annivList li {
    margin-bottom: 6px;
    cursor: pointer;
  }

  #detail {
    margin-top: 14px;
    background: #fff;
    border-radius: 14px;
    padding: 12px;
  }
  
  #snow {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none; /* í´ë¦­ ë°©í•´ X */
  z-index: 5;
  }
  
  body.night {
  background: #0f1220;
  color: #cfd3ff;
  }
  
  body.night .calendar,
  body.night .dday,
  body.night #memoBox,
  body.night #detail {
    background: #1b1f3a;
    color: #e6e6f0;
  }
  
  #themeBtn {
    position: fixed;
    top: 14px;
    right: 14px;

    height: 36px;
    padding: 0 16px;          /* â† ì•Œì•½ í•µì‹¬ */
    border-radius: 999px;    /* â† ëˆ„ìš´ ì•Œì•½ */
    
    display: flex;
    align-items: center;
    justify-content: center;
    
    font-size: 18px;
    line-height: 1;
    
    background: #e5e5e5;     /* ë‚® ëª¨ë“œ */
    color: #333;
    
    border: none;
    cursor: pointer;
    z-index: 30;
  }
  
  /* ğŸŒ™ ë°¤ ëª¨ë“œ ìº˜ë¦°ë” ê¸°ë…ì¼ ê°€ë…ì„± ê°œì„  */
  body.night .day.mark {
    background: #2a2f5a;   /* ì–´ë‘ìš´ ë¸”ë£¨ */
    color: #ffffff;       /* ê¸€ì ì„ ëª…í•˜ê²Œ */
  }
  
  body.night .day.mark span {
    opacity: 0.9;
  }
  
  /* ğŸŒ™ ë°¤ ëª¨ë“œ ë©”ëª¨ì°½ ê°€ë…ì„± ê°œì„  */
  body.night .memo {
    background: #2a2f5a;   /* ìº˜ë¦°ë” ê¸°ë…ì¼ ì¹¸ê³¼ ë™ì¼ í†¤ */
    color: #ffffff;
  }
  
  body.night #memoBox {
    background: #1b1f3a;
  }
  
  body.night .memo-input input {
    background: #2a2f5a;
    color: #ffffff;
    border: 1px solid #3a4080;
  }
  
  body.night .memo-input input::placeholder {
    color: #b8bcff;
  }
  
  /* ğŸŒ™ ë°¤ ëª¨ë“œ â€“ ìº˜ë¦°ë” í™”ì‚´í‘œ ë²„íŠ¼ */
  body.night .calendar-header button {
    background: #2a2f5a;
    color: #ffffff;
    border: none;
  }
  
  /* hover ì‹œ ì‚´ì§ ë°ê²Œ */
  body.night .calendar-header button:hover {
    background: #3a4080;
  }
  
  body.night #themeBtn {
    background: #2a2f5a;
    color: #ffffff;
  }
  
  body.night #themeBtn:hover {
    background: #3a4080;
  }
  
  /* âœ… ê¸°ë…ì¼(mark) ìˆëŠ” ë‚ ì§œë§Œ ë§í’ì„  í‘œì‹œ */
  .day.mark:hover::after {
    content: attr(data-text);
    position: absolute;
    left: 50%;
    bottom: -34px;
    transform: translateX(-50%);
    background: #333;
    color: #fff;
    padding: 4px 7px;
    border-radius: 6px;
    font-size: 10px;
    white-space: nowrap;
    z-index: 50;          /* â­ ê°€ë ¤ì§ ë°©ì§€ í•µì‹¬ */
  }
  
  .day.mark[data-text=""]::after {
    display: none;
  }
  
  input {
    font-size: 16px;
  }
  
  body {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  /* ===== í”„ë¡œí•„ ===== */
  .profile-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.4);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 20;
  }
  
  .profile-box {
    background: #fff;
    width: 90%;
    max-width: 320px;
    border-radius: 18px;
    padding: 16px;
    text-align: center;
    position: relative;
  }

  body.night .profile-box {
    background: #1b1f3a;
    color: #fff;
  }

  .profile-img {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    background: #ddd;
    margin: 0 auto 10px;
  }

  .hidden {
    display: none;
  }

  body.night .button-row button {
    background: #2a2f5a;
    color: #ffffff;
  }

  body.night .button-row button:hover {
    background: #3a4080;
  }

  body.night .profile-modal {
    background: rgba(0,0,0,0.6);
  }

  /* 1ï¸âƒ£ ì¸íŠ¸ë¡œ ë²„íŠ¼ì€ ë°¤ëª¨ë“œ ì˜í–¥ ë°›ì§€ ì•Šê²Œ */
  body.night #intro button {
    background: #ddd;
    color: #000;
  }

  /* 2ï¸âƒ£ ë°¤ ëª¨ë“œ â€“ ë©”ëª¨ ì „ì†¡ ë²„íŠ¼ */
  body.night .memo-input button {
    background: #2a2f5a;
    color: #ffffff;
  }

  body.night .memo-input button:hover {
    background: #3a4080;
  }

  /* âœ… ë‚® ëª¨ë“œ ê¸°ë³¸ X ë²„íŠ¼ */
  .profile-close-btn {
    position: absolute;
    top: 12px;
    right: 12px;

    height: 28px;
    padding: 0 14px;
    border-radius: 999px;   /* ëˆ„ìš´ ì•Œì•½ */

    background: #e5e5e5;    /* âœ… ë‚® ëª¨ë“œ ìƒ‰ */
    color: #333;

    border: none;
    font-size: 14px;
    cursor: pointer;
  }

  .profile-close-btn:hover {
    background: #ccc;
  }

  /* ğŸŒ™ ë°¤ ëª¨ë“œì—ì„œë§Œ ìƒ‰ ë³€ê²½ */
  body.night .profile-close-btn {
    background: #2a2f5a;
    color: #ffffff;
  }

  body.night .profile-close-btn:hover {
    background: #3a4080;
  }

    #messages {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .bubble {
    max-width: 70%;
    padding: 10px 14px;
    border-radius: 16px;
    font-size: 14px;
    line-height: 1.4;
  }

  .seo {
    align-self: flex-start;
    background: #e8f0ff;
  }

  .hyun {
    align-self: flex-end;
    background: #eee;
    text-align: right;
  }

  .time {
    font-size: 11px;
    opacity: 0.6;
    margin-top: 4px;
  }

/* ===== ì±„íŒ… ì „ì²´ ===== */
#chat {
  margin-top: 24px;

  /* â¬…ï¸ ì™¼ìª½ ë°°ì¹˜ */
  margin-left: 0;
  margin-right: auto;

  width: 380px;              /* PCì—ì„œ ì¹´ë“œ í­ */
  max-width: 100%;

  background: #ffffff;
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);

  position: relative;   /* ë˜ëŠ” ê·¸ëƒ¥ ì´ ì¤„ ìì²´ ì‚­ì œ */
  top: auto;
  left: auto;
  width: 360px;
  max-height: calc(100vh - 120px);
}


/* ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸ */
#messages {
  height: 360px;
  overflow-y: auto;
  padding: 6px 4px 10px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* ê³µí†µ ë©”ì‹œì§€ ë¸”ë¡ */
.message {
  display: flex;
  flex-direction: column;
  max-width: 78%;
}

/* ì´ë¦„ */
.message .name {
  font-size: 11px;
  margin-bottom: 4px;
  opacity: 0.55;
}

/* ë§í’ì„  */
.bubble {
  background: #ffffff;                 /* ğŸ”¹ ë‘˜ ë‹¤ í°ìƒ‰ */
  padding: 10px 14px;
  border-radius: 16px;
  font-size: 14px;
  line-height: 1.45;
  word-break: break-word;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06); /* ğŸ”¹ ë§í’ì„  ëŠë‚Œ */
}

/* ì‹œê°„ */
.time {
  font-size: 11px;
  opacity: 0.45;
  margin-top: 4px;
}

/* ì„œì˜¬ â€“ ì™¼ìª½ */
.left {
  align-self: flex-start;
}

.left .bubble {
  border-bottom-left-radius: 6px; /* ğŸ”¹ ì™¼ìª½ ê¼¬ë¦¬ ëŠë‚Œ */
}

/* í˜„ìš° â€“ ì˜¤ë¥¸ìª½ */
.right {
  align-self: flex-end;
  text-align: right;
}

.right .bubble {
  border-bottom-right-radius: 6px; /* ğŸ”¹ ì˜¤ë¥¸ìª½ ê¼¬ë¦¬ ëŠë‚Œ */
}

/* ì…ë ¥ ì˜ì—­ */
.chat-input {
  display: flex;
  gap: 6px;
  margin-top: 10px;
}

.chat-input select,
.chat-input input {
  flex: 1;
  padding: 10px;
  border-radius: 14px;
  border: 1px solid #ddd;
  font-size: 14px;
}

.chat-input button {
  padding: 10px 16px;
  border-radius: 14px;
  border: none;
  background: #e5e5e5;
}

  body.night .left .bubble {
  background: #2a2f5a;
  color: #fff;
}

body.night .right .bubble {
  background: #3a4080;
  color: #fff;
}

body.night #chat {
  background: #1b1f3a;
}

body.night .bubble {
  background: #2a2f5a;
  color: #ffffff;
}

body.night .chat-input input,
body.night .chat-input select {
  background: #2a2f5a;
  color: #ffffff;
  border: 1px solid #3a4080;
}

  /* ğŸŒ™ ë°¤ ëª¨ë“œ â€“ ì±„íŒ… ë³´ë‚´ê¸° ë²„íŠ¼ */
body.night .chat-input button {
  background: #2a2f5a;   /* í™ˆ ì¹´ë“œë“¤ê³¼ ê°™ì€ í†¤ */
  color: #ffffff;
}

body.night .chat-input button:hover {
  background: #3a4080;
}

/* ğŸ“± ëª¨ë°”ì¼ ëŒ€ì‘ */
@media (max-width: 768px) {
  #main-layout {
    grid-template-columns: 1fr; /* í•œ ì¤„ */
  }
  
  #chat {
    position: relative;
    left: auto;
    top: auto;
    width: 94%;
    margin: 24px auto 0;
  }
}

/* ===== ë©”ì¸ ë ˆì´ì•„ì›ƒ ===== */
#main-layout {
  display: grid;
  grid-template-columns: 360px 1fr;
  gap: 24px;

  max-width: 1200px;
  margin: 0 auto;
  padding: 24px;
}


</style>
</head>

<body>
<canvas id="snow"></canvas>

<!-- ===== ì¸íŠ¸ë¡œ ===== -->
<div id="intro" class="center">
  <h1>ëˆˆì€ ì–¸ì œê¹Œì§€ë‚˜ ë‚´ë¦´ê¹Œ?</h1>
  <div class="button-row">
    <button onclick="enterHome()">Yes</button>
    <button onclick="showNo()">No</button>
  </div>
  <p id="noText" class="hidden">ëˆˆì€ ê²°êµ­ ë…¹ì•„ë²„ë ¤.</p>
</div>

<!-- ===== ë©”ì¸ ë ˆì´ì•„ì›ƒ ===== -->
<div id="main-layout">

  <div id="chat">
    <div id="messages"></div>
    
    <div class="chat-input">
      <select id="sender">
        <option value="ì„œì˜¬">ì„œì˜¬</option>
        <option value="í˜„ìš°">í˜„ìš°</option>
      </select>
      
      <input
        id="messageInput"
        placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì¤˜â€¦"
        onkeydown="if(event.key==='Enter') sendMessage()"
      />
      
      <button onclick="sendMessage()">ë³´ë‚´ê¸°</button>
    </div>
  </div>

  <!-- ===== í™ˆ ===== -->
  <div id="home" class="hidden">
    <h2>Our Winter â„ï¸</h2>

    <button id="themeBtn" onclick="toggleTheme()">ğŸŒ™</button>

    <div class="button-row">
      <button onclick="openProfile('b')">í˜„ìš°</button>
      <span style="font-size:18px;">ğŸ©µ</span>
      <button onclick="openProfile('a')">ì„œì˜¬</button>
    </div>
  </div>
</div>

<div class="dday" id="ddayBox"></div>

<div class="calendar">
  <div class="calendar-header">
    <button onclick="moveMonth(-1)">&lt;</button>
    <strong id="monthTitle"></strong>
    <button onclick="moveMonth(1)">&gt;</button>
  </div>
  <div class="days" id="calendar"></div>
  </div>

  <h3>Anniversary</h3>
  <ul id="annivList"></ul>

  <div id="detail" class="hidden"></div>


<div id="profileModal" class="hidden profile-modal">
      <div class="profile-box">
        <button class="profile-close-btn" onclick="closeProfile()">âœ•</button>
        <div id="profileContent"></div>
      </div>
    </div>

</div>

<script>
  /* ===== ê¸°ë³¸ ë‚ ì§œ ===== */
  const startDate = new Date(2023, 1, 17); // 2023-02-17 = 1ì¼
  const birthdays = [
    { m: 10, d: 30, text: "ğŸ‚ ì„œì˜¬ ìƒì¼" },
    { m: 6, d: 3, text: "ğŸ‚ í˜„ìš° ìƒì¼" }
  ];

  let current = new Date();

  /* ===== ì¸íŠ¸ë¡œ ===== */
  function enterHome() {
  document.getElementById("intro").style.display = "none";
  document.getElementById("home").classList.remove("hidden");
  document.getElementById("themeBtn").style.display = "block";

  updateDday();
  renderCalendar();
}

  function showNo() {
    document.getElementById("noText").classList.remove("hidden");
  }

  /* ===== D-Day ===== */
  function updateDday() {
    const today = new Date();
    const days = Math.floor((today - startDate) / 86400000) + 1;
    document.getElementById("ddayBox").innerHTML =
      `<strong>D+${days}</strong><br>ëˆˆì´ ë‚´ë¦° ì§€ ${days}ì¼`;
  }

  /* ===== ìº˜ë¦°ë” ì´ë™ ===== */
  function moveMonth(diff) {
    current.setMonth(current.getMonth() + diff);
    renderCalendar();
  }

  /* ===== ìº˜ë¦°ë” ë Œë” ===== */
  function renderCalendar() {
    const cal = document.getElementById("calendar");
    const list = document.getElementById("annivList");
    const detail = document.getElementById("detail");

    cal.innerHTML = "";
    list.innerHTML = "";
    detail.classList.add("hidden");

    const y = current.getFullYear();
    const m = current.getMonth();

    document.getElementById("monthTitle").innerText = `${y}ë…„ ${m + 1}ì›”`;

    "ì¼ì›”í™”ìˆ˜ëª©ê¸ˆí† ".split("").forEach(d => {
      cal.innerHTML += `<div>${d}</div>`;
    });

    const firstDay = new Date(y, m, 1).getDay();
    const lastDate = new Date(y, m + 1, 0).getDate();

    for (let i = 0; i < firstDay; i++) cal.innerHTML += `<div></div>`;

    for (let d = 1; d <= lastDate; d++) {
      const cellDate = new Date(y, m, d);
      let label = "";
      let icon = "";

      // ì‚¬ê·„ ë‚ 
      if (cellDate.getTime() === startDate.getTime()) {
        label = "ğŸ©µ ëˆˆì´ ë‚´ë¦¬ê¸° ì‹œì‘í•œ ";
        icon = "ğŸ©µ";
      }

      // ìƒì¼
      birthdays.forEach(b => {
        if (b.m === m && b.d === d) {
          label = b.text;
          icon = "ğŸ‚";
        }
      });

      // 100ì¼ ë‹¨ìœ„
      const days = Math.floor((cellDate - startDate) / 86400000) + 1;
      if (days > 1 && days % 100 === 0) {
        label = `â„ï¸ ${days}ì¼`;
        icon = "â„ï¸";
        list.innerHTML += `<li onclick="showDetail('${days}ì¼','${cellDate.toLocaleDateString()}')">â„ï¸ ${days}ì¼</li>`;
      }

      // ì£¼ë…„
      if (cellDate.getDate() === startDate.getDate() &&
          cellDate.getMonth() === startDate.getMonth() &&
          cellDate.getFullYear() > startDate.getFullYear()) {
        const yearDiff = cellDate.getFullYear() - startDate.getFullYear();
        label = `ğŸ’ ${yearDiff}ì£¼ë…„`;
        icon = "ğŸ’";
        list.innerHTML += `<li onclick="showDetail('${yearDiff}ì£¼ë…„','${cellDate.toLocaleDateString()}')">ğŸ’ ${yearDiff}ì£¼ë…„</li>`;
      }

      cal.innerHTML += `
        <div class="day ${label ? "mark" : ""}" data-text="${label}">
          ${d}
          <span>${icon}</span>
        </div>
      `;
    }
  }

  /* ===== ìƒì„¸ ===== */
  function showDetail(title, date) {
    const box = document.getElementById("detail");
    box.classList.remove("hidden");
    box.innerHTML = `
      <h4>${title}</h4>
      <p>${date}</p>
      <p>ğŸ“¸ ì‚¬ì§„ ì—…ë¡œë“œ ì˜ˆì •</p>
    `;
  }

/* ===== ëˆˆ íš¨ê³¼ ===== */
const canvas = document.getElementById("snow");
const ctx = canvas.getContext("2d");

let w, h;
let snowflakes = [];
let snowCount = 80;      // ê¸°ë³¸ ëˆˆ ê°œìˆ˜
let snowSpeed = 1;      // ê¸°ë³¸ ì†ë„

function resizeSnow() {
  w = canvas.width = window.innerWidth;
  h = canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeSnow);
resizeSnow();

function createSnow() {
  snowflakes = [];
  for (let i = 0; i < snowCount; i++) {
    snowflakes.push({
      x: Math.random() * w,
      y: Math.random() * h,
      r: Math.random() * 3 + 1,
      d: Math.random() + 1
    });
  }
}
createSnow();

function drawSnow() {
  ctx.clearRect(0, 0, w, h);
  ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
  ctx.beginPath();

  snowflakes.forEach(f => {
    ctx.moveTo(f.x, f.y);
    ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
  });

  ctx.fill();
  moveSnow();
}

function moveSnow() {
  snowflakes.forEach(f => {
    f.y += Math.pow(f.d, 2) + 0.5 * snowSpeed;
    f.x += Math.sin(f.y * 0.01);

    if (f.y > h) {
      f.y = -10;
      f.x = Math.random() * w;
    }
  });
}

setInterval(drawSnow, 33);

/* í…Œë§ˆ */
function toggleTheme() {
  document.body.classList.toggle("night");
  const isNight = document.body.classList.contains("night");
  localStorage.setItem("theme", isNight ? "night" : "day");
  document.getElementById("themeBtn").textContent = isNight ? "â˜€ï¸" : "ğŸŒ™";
}

const savedTheme = localStorage.getItem("theme");
if (savedTheme === "night") {
  document.body.classList.add("night");
  document.getElementById("themeBtn").textContent = "â˜€ï¸";
}

/* âœ… í”„ë¡œí•„ */
function openProfile(who) {
  const box = document.getElementById("profileModal");
  const content = document.getElementById("profileContent");

  if (who === "a") {
    content.innerHTML = `
      <div class="profile-img"></div>
      <h3>ì„œì˜¬</h3>
      <p>ì„¸ê³„ì˜ ì¢…ë§, ë„¤ ì•ì—ì„œ<br>#ë„¤ê°€ë¶€ë””_ë‚˜ë¥¼</p>
    `;
  } else {
    content.innerHTML = `
      <div class="profile-img"></div>
      <h3>í˜„ìš°</h3>
      <p>ì„¸ê³„ì˜ ì¢…ë§, ê·¸ ì•ì—ì„œ<br>#ë‚´ê°€ê°íˆ_ë„ˆë¥¼</p>
    `;
  }

  box.classList.remove("hidden");
}

function closeProfile() {
  document.getElementById("profileModal").classList.add("hidden");
}
 
const firebaseConfig = {
    apiKey: "ì•„ë¬´ê±°ë‚˜",
    authDomain: "our-winter-chat.firebaseapp.com",
    databaseURL: "https://our-winter-chat-default-rtdb.firebaseio.com",
    projectId: "our-winter-chat",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

  function sendMessage() {
    const text = document.getElementById("messageInput").value.trim();
    const user = document.getElementById("sender").value;
    if (!text) return;

    const now = Date.now();

    db.ref("messages").push({
      user: user,
      text: text,
      time: now,
      read: false
    });

    document.getElementById("messageInput").value = "";
  }

    const messagesDiv = document.getElementById("messages");

  db.ref("messages").on("value", (snapshot) => {
    messagesDiv.innerHTML = "";

snapshot.forEach((child) => {
  const key = child.key;
  const { user, text, time, read } = child.val();

  const date = new Date(time);
  const month = date.getMonth() + 1;
  const day = date.getDate();
  const hour = date.getHours().toString().padStart(2, "0");
  const min = date.getMinutes().toString().padStart(2, "0");

  const msg = document.createElement("div");
  const side = user === "ì„œì˜¬" ? "left" : "right";
  msg.className = `message ${side}`;

  msg.innerHTML = `
    <div class="name">${user}</div>
    <div class="bubble">${text}</div>
    <div class="time">${month}ì›” ${day}ì¼ ${hour}:${min}</div>
  `;

  /* ğŸ’¡ ë§í’ì„  í´ë¦­ â†’ ì‚­ì œ */
  msg.querySelector(".bubble").onclick = () => {
    const ok = confirm("ì´ ë©”ì‹œì§€ë¥¼ ì‚­ì œí• ê¹Œ?");
    if (ok) {
      db.ref("messages/" + key).remove();
    }
  };

  messagesDiv.appendChild(msg);

  if (!read) {
    db.ref("messages/" + key + "/read").set(true);
  }
});
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  });
  
</script>

</body>
</html>
