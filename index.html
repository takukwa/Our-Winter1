<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>Our Winter</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  color: #333;
}

.hidden { display: none; }

.center {
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
}

.button-row {
  display: flex;
  gap: 20px;
  margin-top: 15px;
}

button {
  padding: 8px 22px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  background: #ddd;
}

button:hover { background: #bbb; }

#home { padding: 20px; }

.dday {
  background: white;
  padding: 12px;
  border-radius: 14px;
  margin: 15px 0;
}

.calendar {
  width: 280px;
  background: white;
  padding: 15px;
  border-radius: 18px;
  margin-top: 15px;
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 5px;
  font-size: 12px;
  text-align: center;
  margin-top: 8px;
}

.day {
  padding: 6px;
  border-radius: 6px;
  position: relative;
  cursor: pointer;
}

.anniv { background: #dbe8ff; }

.day span { font-size: 10px; }

.day:hover::after {
  content: attr(data-text);
  position: absolute;
  bottom: -28px;
  left: 50%;
  transform: translateX(-50%);
  background: #333;
  color: white;
  padding: 3px 6px;
  font-size: 10px;
  border-radius: 6px;
  white-space: nowrap;
}

#annivList li {
  cursor: pointer;
  margin-bottom: 6px;
}

#detail {
  background: white;
  border-radius: 15px;
  padding: 15px;
  margin-top: 20px;
}
</style>
</head>

<body>

<!-- ì¸íŠ¸ë¡œ -->
<div id="intro" class="center">
  <h1>ëˆˆì€ ì–¸ì œê¹Œì§€ë‚˜ ë‚´ë¦´ê¹Œ?</h1>
  <div class="button-row">
    <button onclick="enterHome()">Yes</button>
    <button onclick="showNo()">No</button>
  </div>
  <p id="noText" class="hidden">ëˆˆì€ ê²°êµ­ ë…¹ì•„ë²„ë ¤.</p>
</div>

<!-- í™ˆ -->
<div id="home" class="hidden">
  <h2>Our Winter â„ï¸</h2>

  <!-- D-DAY -->
  <div class="dday" id="ddayBox"></div>

  <!-- ìº˜ë¦°ë” -->
  <div class="calendar">
    <div class="calendar-header">
      <button onclick="changeMonth(-1)">&lt;</button>
      <h3 id="monthTitle"></h3>
      <button onclick="changeMonth(1)">&gt;</button>
    </div>
    <div class="days" id="calendar"></div>
  </div>

  <h3 style="margin-top:25px;">Anniversary</h3>
  <ul id="annivList"></ul>

  <div id="detail" class="hidden"></div>
</div>

<script>
/* ===== ê¸°ë³¸ ì •ë³´ ===== */
const startDate = new Date(2023, 1, 17); // 2023-02-17 = 1ì¼
const birthdays = [
  { month: 10, day: 30, text: "ğŸ‚ í•œì„œì˜¬ ìƒì¼" },
  { month: 6, day: 3, text: "ğŸ‚ í•˜í˜„ìš° ìƒì¼" }
];

let current = new Date();

/* ì¸íŠ¸ë¡œ */
function enterHome() {
  intro.classList.add("hidden");
  home.classList.remove("hidden");
  updateDday();
  renderCalendar();
}

function showNo() {
  noText.classList.remove("hidden");
}

/* D-DAY ê³„ì‚° */
function updateDday() {
  const today = new Date();
  const diff = Math.floor((today - startDate) / 86400000) + 1;
  ddayBox.innerHTML = `
    <strong>D+${diff}</strong><br>
    ìš°ë¦¬ê°€ ë§Œë‚œ ì§€ ${diff}ì¼
  `;
}

/* ë‹¬ ì´ë™ */
function changeMonth(diff) {
  current.setMonth(current.getMonth() + diff);
  renderCalendar();
}

/* ìº˜ë¦°ë” */
function renderCalendar() {
  calendar.innerHTML = "";
  annivList.innerHTML = "";
  detail.classList.add("hidden");

  const year = current.getFullYear();
  const month = current.getMonth();

  monthTitle.innerText = `${year}ë…„ ${month + 1}ì›”`;

  "ì¼ì›”í™”ìˆ˜ëª©ê¸ˆí† ".split("").forEach(d => {
    calendar.innerHTML += `<div>${d}</div>`;
  });

  const firstDay = new Date(year, month, 1).getDay();
  const lastDate = new Date(year, month + 1, 0).getDate();

  for (let i = 0; i < firstDay; i++) calendar.innerHTML += `<div></div>`;

  for (let d = 1; d <= lastDate; d++) {
    const cellDate = new Date(year, month, d);
    let label = "", icon = "";

    // ì‚¬ê·„ ë‚ 
    if (cellDate.getTime() === startDate.getTime()) {
      label = "â¤ï¸ ì‚¬ê·„ ë‚  (1ì¼)";
      icon = "â¤ï¸";
    }

    // ìƒì¼
    birthdays.forEach(b => {
      if (b.month === month && b.day === d) {
        label = b.text;
        icon = "ğŸ‚";
      }
    });

    // 100ì¼ ë‹¨ìœ„
    const days = Math.floor((cellDate - startDate) / 86400000) + 1;
    if (days > 1 && days % 100 === 0) {
      label = `${days}ì¼`;
      icon = "â„ï¸";
      annivList.innerHTML += `
        <li onclick="showDetail('${days}ì¼','${cellDate.toLocaleDateString()}')">
          â„ï¸ ${days}ì¼ (${cellDate.toLocaleDateString()})
        </li>`;
    }

    calendar.innerHTML += `
      <div class="day ${label ? 'anniv' : ''}" data-text="${label}">
        ${d} <span>${icon}</span>
      </div>`;
  }
}

/* ìƒì„¸ */
function showDetail(title, date) {
  detail.classList.remove("hidden");
  detail.innerHTML = `
    <h4>${title}</h4>
    <p>${date}</p>
    <p>ğŸ“¸ ì—¬ê¸°ì— ì‚¬ì§„ì„ ë„£ì„ ìˆ˜ ìˆì–´ìš”</p>
  `;
}
</script>

</body>
</html>
